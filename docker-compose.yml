version: '3'
networks: 
  web:
  db:
services:
  zac:
    restart: always
    build: ./Zac
    image: zac
    environment:
      - DB_SERVER=mongodb-zac
      - DB_NAME=zac
      - TOKEN_BOT={token}
      - REDIS_SERVER=redis-zac
      - REDIS_PORT=6379
      - REDIS_DB=0
    volumes:
      - /etc/localtime:/etc/localtime:ro
    networks:
      - web
      - db
    ports:
      - 80:80
  mongodb-zac:
    image: mongo:latest
    environment: 
      - MONGO_DATA_DIR=/data/db
      - MONGO_LOG_DIR=/dev/null
    volumes:
      - ./data/mongodb/cdals:/data/db
      - /etc/localtime:/etc/localtime:ro
    networks:
      - db
  redis-zac:
    image: redis:latest
    volumes:
      - /etc/localtime:/etc/localtime:ro
    networks:
      - db